name: toybox CI

on:
  schedule:
    - cron:  '0 2 * * *'
  push:
    branches: [ main ] 
  pull_request:
    branches: [ main ]

jobs:
  MacOS-10_15:
    runs-on: macos-10.15

    steps:
    - uses: actions/checkout@v2
    - name: Setup Zig
      uses: goto-bus-stop/setup-zig@v1
      with:
        version: master
    - name: Build
      run: zig build
    - name: Test
      run: VERBOSE=1 make tests

  Ubuntu-20_04:
    runs-on: ubuntu-20.04

    steps:
    - uses: actions/checkout@v2
    - name: Setup Zig
      uses: goto-bus-stop/setup-zig@v1
      with:
        version: master
    - name: Build
      run: zig build
    - name: Test
      run: VERBOSE=1 make tests
